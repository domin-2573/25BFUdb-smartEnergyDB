-- 简化的配电网监测测试
USE smart_energy;

-- 插入测试配电房
INSERT IGNORE INTO `配电房信息表` (`配电房编号`, `名称`, `位置描述`, `电压等级`, `变压器数量`, `投运时间`, `负责人ID`, `联系方式`)
VALUES ('TEST_PDF_001', '测试总配电房', '测试园区A栋地下1层', '35kV/0.4kV', 2, '2024-01-15', 'TEST_USER_001', '13800000001');

-- 插入正常回路数据
INSERT INTO `回路监测数据表` (`数据编号`, `配电房编号`, `回路编号`, `采集时间`, `电压kV`, `电流A`, `有功功率kW`, `无功功率kVar`, `功率因数`, `正向有功电量kWh`, `反向有功电量kWh`, `开关状态`, `电缆头温度`, `电容器温度`)
VALUES ('TEST_HL_001', 'TEST_PDF_001', 'L1', '2026-01-06 08:00:00', 35.20, 150.50, 5000.25, 1200.75, 0.95, 12500.50, 25.75, '合闸', 45.5, 38.5);

-- 插入异常回路数据（电压越限 + 温度过高）
INSERT INTO `回路监测数据表` (`数据编号`, `配电房编号`, `回路编号`, `采集时间`, `电压kV`, `电流A`, `有功功率kW`, `无功功率kVar`, `功率因数`, `正向有功电量kWh`, `反向有功电量kWh`, `开关状态`, `电缆头温度`, `电容器温度`)
VALUES ('TEST_HL_002', 'TEST_PDF_001', 'L2', '2026-01-06 08:15:00', 37.50, 200.45, 7500.60, 1800.90, 0.94, 18500.75, 45.20, '合闸', 105.2, 80.6);

-- 插入正常变压器数据
INSERT INTO `变压器监测数据表` (`数据编号`, `配电房编号`, `变压器编号`, `采集时间`, `负载率`, `绕组温度`, `铁芯温度`, `环境温度`, `环境湿度`, `运行状态`)
VALUES ('TEST_BYQ_001', 'TEST_PDF_001', 'BYQ-T001', '2026-01-06 08:00:00', 75.50, 82.5, 75.0, 25.5, 45.2, '正常');

-- 插入异常变压器数据
INSERT INTO `变压器监测数据表` (`数据编号`, `配电房编号`, `变压器编号`, `采集时间`, `负载率`, `绕组温度`, `铁芯温度`, `环境温度`, `环境湿度`, `运行状态`)
VALUES ('TEST_BYQ_002', 'TEST_PDF_001', 'BYQ-T002', '2026-01-06 08:15:00', 95.80, 105.5, 95.0, 27.5, 48.2, '异常');

-- 查看结果
SELECT '=== 测试数据插入结果 ===' AS INFO;
SELECT * FROM `配电房信息表` WHERE `配电房编号` LIKE 'TEST_%';
SELECT * FROM `回路监测数据表` WHERE `数据编号` LIKE 'TEST_%';
SELECT * FROM `变压器监测数据表` WHERE `数据编号` LIKE 'TEST_%';

-- 查看触发的告警
SELECT '=== 触发的告警信息 ===' AS INFO;
SELECT * FROM `告警信息表` WHERE `关联设备编号` IN ('L2', 'BYQ-T002') ORDER BY `发生时间` DESC LIMIT 5;
