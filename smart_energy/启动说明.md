# 智慧能源管理系统 - 启动说明

## 前置准备

### 1. 环境要求
- JDK 1.8 或更高版本
- Maven 3.6 或更高版本
- MySQL 5.7 或更高版本（或 MySQL 8.0）

### 2. 数据库准备

#### 步骤1：创建数据库
```sql
CREATE DATABASE smart_energy CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

#### 步骤2：执行建表SQL
执行 `建立数据库sql表.sql` 文件创建所有表结构

#### 步骤3：导入数据（可选）
如果需要测试数据，执行 `data.sql` 文件导入数据

### 3. 配置数据库连接

编辑 `src/main/resources/application.properties` 文件，修改以下配置：

```properties
# 修改为您的数据库地址
spring.datasource.url=jdbc:mysql://localhost:3306/smart_energy?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&useSSL=false&allowPublicKeyRetrieval=true

# 修改为您的数据库用户名
spring.datasource.username=root

# 修改为您的数据库密码
spring.datasource.password=your_password
```

## 启动方式

### 方式1：使用 Maven 命令启动（推荐）

1. 打开命令行，进入项目目录：
```bash
cd e:\数据库课设\25BFUdb-smartEnergyDB\smart_energy
```

2. 编译项目：
```bash
mvn clean compile
```

3. 启动项目：
```bash
mvn spring-boot:run
```

### 方式2：使用 IDE 启动

#### IntelliJ IDEA
1. 打开项目
2. 右键点击 `PlantSystemApplication.java`
3. 选择 `Run 'PlantSystemApplication.main()'`

#### Eclipse
1. 导入项目（Import as Maven Project）
2. 右键点击 `PlantSystemApplication.java`
3. 选择 `Run As` -> `Java Application`

### 方式3：打包后启动

1. 打包项目：
```bash
mvn clean package
```

2. 运行jar包：
```bash
java -jar target/SmartEnergy-0.0.1-SNAPSHOT.war
```

## 验证启动

启动成功后，您应该看到类似以下日志：
```
Started PlantSystemApplication in X.XXX seconds
```

访问地址：
- 应用地址：http://localhost:2008/energy
- 根据您的Controller配置，访问相应的接口

## 常见问题

### 1. 数据库连接失败
- 检查MySQL服务是否启动
- 检查数据库用户名和密码是否正确
- 检查数据库是否已创建
- 检查防火墙是否阻止了连接

### 2. 端口被占用
- 修改 `application.properties` 中的 `server.port` 为其他端口（如 8080）

### 3. Maven依赖下载失败
- 检查网络连接
- 配置Maven镜像源（推荐使用阿里云镜像）

### 4. 中文乱码问题
- 确保数据库字符集为 utf8mb4
- 确保 application.properties 文件编码为 UTF-8
- 检查JDBC连接URL中的字符编码参数

## 项目结构说明

```
smart_energy/
├── Controller/          # 控制器层
├── Service/            # 服务层
├── Dao/                # 数据访问层
├── Entity/             # 实体类
├── Tool/               # 工具类
├── src/main/resources/ # 配置文件
└── pom.xml            # Maven配置文件
```

## 注意事项

1. 确保数据库表名和字段名使用中文（已配置反引号包裹）
2. 所有SQL语句已更新为使用中文字段名
3. SELECT查询使用AS别名映射到实体类的英文字段名

