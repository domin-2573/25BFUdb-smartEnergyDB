# 大屏DAO表名修复说明

## ✅ 已修复的表名错误

### 1. 实时汇总数据表

**问题：** `RealtimeSummaryDataDao.java` 中使用的表名是 `实时汇总数据`，但实际表名应该是 `实时汇总数据表`（带"表"字）

**修复内容：**
- ✅ 所有 `INSERT INTO` 语句
- ✅ 所有 `SELECT` 语句（4处）
- ✅ 字段名修复：
  - `总用电量` → `总用电量kWh`
  - `总用水量` → `总用水量m3`
  - `总蒸汽消耗量` → `总蒸汽消耗量t`
  - `总天然气消耗量` → `总天然气消耗量m3`
  - `光伏总发电量` → `光伏总发电量kWh`
  - `光伏自用电量` → `光伏自用电量kWh`

### 2. 历史趋势数据表

**问题：** `HistoryTrendDataDao.java` 中使用的表名是 `历史趋势数据`，但实际表名应该是 `历史趋势数据表`（带"表"字）

**修复内容：**
- ✅ 所有 `INSERT INTO` 语句
- ✅ 所有 `SELECT` 语句（4处）
- ✅ 字段名修复：
  - `能耗或发电量数值` → `能耗发电量数值`

### 3. 大屏展示配置表

**问题：** `DashboardConfigDao.java` 中使用的表名是 `大屏展示配置`，但实际表名应该是 `大屏展示配置表`（带"表"字）

**修复内容：**
- ✅ 所有 `INSERT INTO` 语句
- ✅ 所有 `SELECT` 语句（4处）
- ✅ `UPDATE` 语句
- ✅ `DELETE` 语句

## 📋 字段名对照表

### 实时汇总数据表字段名

| 代码中使用的字段名 | 数据库实际字段名 |
|------------------|----------------|
| `总用电量` | ✅ `总用电量kWh` |
| `总用水量` | ✅ `总用水量m3` |
| `总蒸汽消耗量` | ✅ `总蒸汽消耗量t` |
| `总天然气消耗量` | ✅ `总天然气消耗量m3` |
| `光伏总发电量` | ✅ `光伏总发电量kWh` |
| `光伏自用电量` | ✅ `光伏自用电量kWh` |

### 历史趋势数据表字段名

| 代码中使用的字段名 | 数据库实际字段名 |
|------------------|----------------|
| `能耗或发电量数值` | ✅ `能耗发电量数值` |

## 🔍 验证方法

### 1. 检查表名

所有DAO中的表名应该与DDL文件中的表名完全一致：
- ✅ `实时汇总数据表`（不是`实时汇总数据`）
- ✅ `历史趋势数据表`（不是`历史趋势数据`）
- ✅ `大屏展示配置表`（不是`大屏展示配置`）

### 2. 测试访问

访问以下页面，确认不再出现表名错误：
- `/SmartEnergy/dashboard/realtime` - 实时监控大屏
- `/SmartEnergy/dashboard/config/list` - 大屏配置管理
- `/SmartEnergy/dashboard/trend` - 历史趋势分析

## ⚠️ 注意事项

### 字段名必须完全匹配

DDL中的字段名包含单位后缀（如`kWh`、`m3`、`t`），在SQL查询中必须使用完整的字段名。

### 实体类映射

实体类中的属性名（如`totalElectricity`）通过`AS`别名映射到数据库字段名（如`总用电量kWh`），这是正确的。

## 🚀 下一步

1. **重新编译启动应用**
2. **测试实时大屏功能**
3. **测试历史趋势分析功能**
4. **如果还有其他表名错误，按照相同方法修复**

## ✅ 修复完成

- ✅ `RealtimeSummaryDataDao.java` - 所有表名和字段名已修复
- ✅ `HistoryTrendDataDao.java` - 所有表名和字段名已修复
- ✅ `DashboardConfigDao.java` - 所有表名已修复
- ✅ `dashboard/realtime.jsp` - 字段映射已更新

现在应该可以正常访问实时监控大屏了！

