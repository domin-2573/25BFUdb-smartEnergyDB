# DAO表名修复说明

## ✅ 已修复的表名错误

### 1. 运维工单数据表

**问题：** `MaintenanceWorkOrderDao.java` 中使用的表名是 `运维工单数据`，但实际表名应该是 `运维工单数据表`（带"表"字）

**修复内容：**
- ✅ 所有 `INSERT INTO` 语句
- ✅ 所有 `SELECT` 语句（5处）
- ✅ `UPDATE` 语句
- ✅ 复杂查询中的表名（JOIN语句）

**修复的SQL语句：**
```java
// 修复前
FROM `运维工单数据`

// 修复后
FROM `运维工单数据表`
```

### 2. 设备台账数据表

**问题：** `EquipmentLedgerDao.java` 中使用的表名是 `设备台账数据`，但实际表名应该是 `设备台账数据表`（带"表"字）

**修复内容：**
- ✅ 所有 `INSERT INTO` 语句
- ✅ 所有 `SELECT` 语句（6处）
- ✅ `UPDATE` 语句
- ✅ `DELETE` 语句

**额外修复：**
- ✅ 字段名修复：`质保期年` → `质保期`（DDL中字段名是`质保期`）

**修复的SQL语句：**
```java
// 修复前
FROM `设备台账数据`
`质保期年` AS warrantyPeriod

// 修复后
FROM `设备台账数据表`
`质保期` AS warrantyPeriod
```

## 📋 表名对照表

根据DDL文件，所有表的正确名称应该是：

| 业务线 | 表名（代码中） | 正确表名（数据库中） |
|--------|--------------|-------------------|
| 用户管理 | `用户表` | ✅ `用户表` |
| 配电网监测 | `配电房信息表` | ✅ `配电房信息表` |
| 配电网监测 | `回路监测数据表` | ✅ `回路监测数据表` |
| 配电网监测 | `变压器监测数据表` | ✅ `变压器监测数据表` |
| 分布式光伏 | `光伏设备信息表` | ✅ `光伏设备信息表`（已修复） |
| 分布式光伏 | `光伏发电数据表` | ✅ `光伏发电数据表` |
| 分布式光伏 | `光伏预测数据表` | ✅ `光伏预测数据表` |
| 分布式光伏 | `并网点信息表` | ✅ `并网点信息表`（新增） |
| 综合能耗 | `能耗计量设备信息表` | ✅ `能耗计量设备信息表` |
| 综合能耗 | `能耗监测数据表` | ✅ `能耗监测数据表` |
| 综合能耗 | `峰谷能耗数据表` | ✅ `峰谷能耗数据表` |
| 告警运维 | `告警信息表` | ✅ `告警信息表` |
| 告警运维 | `运维工单数据` | ❌ → ✅ `运维工单数据表`（已修复） |
| 告警运维 | `设备台账数据` | ❌ → ✅ `设备台账数据表`（已修复） |
| 告警运维 | `执法人员信息表` | ✅ `执法人员信息表`（新增） |
| 大屏展示 | `大屏展示配置表` | ✅ `大屏展示配置表` |
| 大屏展示 | `实时汇总数据表` | ✅ `实时汇总数据表` |
| 大屏展示 | `历史趋势数据表` | ✅ `历史趋势数据表` |

## 🔍 验证方法

### 1. 检查所有DAO文件

可以使用以下SQL查询验证表名：
```sql
SHOW TABLES FROM smart_energy;
```

### 2. 检查表名一致性

所有DAO中的表名应该与DDL文件中的表名完全一致。

### 3. 测试访问

访问以下页面，确认不再出现表名错误：
- `/SmartEnergy/maintenance/workorder/list` - 运维工单列表
- `/SmartEnergy/maintenance/ledger/list` - 设备台账列表

## ⚠️ 注意事项

### 字段名检查

除了表名，还需要注意字段名的一致性：

1. **设备台账数据表**：
   - ✅ 字段名：`质保期`（不是`质保期年`）

2. **其他表**：
   - 所有字段名应该与DDL文件中的字段名完全一致
   - 注意中文字段名的大小写和特殊字符

### 常见错误模式

1. **缺少"表"字**：
   - ❌ `运维工单数据`
   - ✅ `运维工单数据表`

2. **字段名不匹配**：
   - ❌ `质保期年`
   - ✅ `质保期`

## 🚀 下一步

1. **重新编译启动应用**
2. **测试运维工单和设备台账功能**
3. **如果还有其他表名错误，按照相同方法修复**

## ✅ 修复完成

- ✅ `MaintenanceWorkOrderDao.java` - 所有表名已修复
- ✅ `EquipmentLedgerDao.java` - 所有表名和字段名已修复

现在应该可以正常访问运维工单和设备台账页面了！

